–ö–æ–Ω–µ—á–Ω–æ! –í–æ—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–π `README.md` —Ñ–∞–π–ª, –æ–ø–∏—Å—ã–≤–∞—é—â–∏–π **—Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞** Telegram-–±–æ—Ç–∞ –∫–∞—Ä—Ç–æ—á–Ω–æ–π –∏–≥—Ä—ã –≤–æ –≤—Å–µ–ª–µ–Ω–Ω–æ–π –°—Ç–∞–ª–∫–µ—Ä–∞ –°—Ç—Ä—É–≥–∞—Ü–∫–∏—Ö, –∑–∞–ø—É—â–µ–Ω–Ω–æ–≥–æ –Ω–∞ Render.

---

# üé¥ Stalker Card Bot

–ö–∞—Ä—Ç–æ—á–Ω–∞—è –∏–≥—Ä–∞ –≤ Telegram –ø–æ –º–æ—Ç–∏–≤–∞–º ¬´–ü–∏–∫–Ω–∏–∫–∞ –Ω–∞ –æ–±–æ—á–∏–Ω–µ¬ª

> **–í–µ—Ä—Å–∏—è:** 0.3.0  
> **–°–æ—Å—Ç–æ—è–Ω–∏–µ:** MVP (—Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ç–µ—Å—Ç–æ–≤–æ–º —Ä–µ–∂–∏–º–µ)  
> **–î–µ–ø–ª–æ–π:** Render (Web Service + Background Worker)  
> **–Ø–∑—ã–∫:** Python 3.11  
> **–§—Ä–µ–π–º–≤–æ—Ä–∫:** aiogram 3.x, SQLAlchemy 2.x, aiohttp

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–û–ø–∏—Å–∞–Ω–∏–µ](#–æ–ø–∏—Å–∞–Ω–∏–µ)
- [–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å](#—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–∑–∞–ø—É—Å–∫)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [–ò–≥—Ä–æ–≤–∞—è –º–µ—Ö–∞–Ω–∏–∫–∞](#–∏–≥—Ä–æ–≤–∞—è-–º–µ—Ö–∞–Ω–∏–∫–∞)
- [–ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã](#–∏–∑–≤–µ—Å—Ç–Ω—ã–µ-–ø—Ä–æ–±–ª–µ–º—ã)
- [–ü–ª–∞–Ω—ã –Ω–∞ –±—É–¥—É—â–µ–µ](#–ø–ª–∞–Ω—ã-–Ω–∞-–±—É–¥—É—â–µ–µ)
- [–î–µ–ø–ª–æ–π –Ω–∞ Render](#–¥–µ–ø–ª–æ–π-–Ω–∞-render)
- [–ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞](#–∫–æ–º–∞–Ω–¥—ã-–±–æ—Ç–∞)
- [–ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã](#–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã)
- [–ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö](#–º–æ–¥–µ–ª–∏-–¥–∞–Ω–Ω—ã—Ö)
- [–ë–æ–µ–≤–∞—è –ª–æ–≥–∏–∫–∞](#–±–æ–µ–≤–∞—è-–ª–æ–≥–∏–∫–∞)
- [–≠–ª–∏—Ç–Ω—ã–µ –∫–∞—Ä—Ç—ã](#—ç–ª–∏—Ç–Ω—ã–µ-–∫–∞—Ä—Ç—ã)
- [–ò–ò –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞](#–∏–∏-–ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞)

---

## –û–ø–∏—Å–∞–Ω–∏–µ

Telegram-–±–æ—Ç, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π **–±–æ–µ–≤—É—é –∫–∞—Ä—Ç–æ—á–Ω—É—é –∏–≥—Ä—É** –≤–æ –≤—Å–µ–ª–µ–Ω–Ω–æ–π ¬´–ü–∏–∫–Ω–∏–∫–∞ –Ω–∞ –æ–±–æ—á–∏–Ω–µ¬ª –∏ ¬´–°—Ç–∞–ª–∫–µ—Ä–∞¬ª.  
–ò–≥—Ä–æ–∫–∏ —Å—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ –ø–æ–ª–µ, –≤—ã–∫–ª–∞–¥—ã–≤–∞—è –∫–∞—Ä—Ç—ã —Å —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏ **–∑–¥–æ—Ä–æ–≤—å—è (HP)** –∏ **–∞—Ç–∞–∫–∏ (ATK)**.  
–ú–µ—Ö–∞–Ω–∏–∫–∞ –±–æ—è ‚Äî **–ø–æ—à–∞–≥–æ–≤–∞—è**, —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –∞—Ç–∞–∫–æ–≤–∞—Ç—å –∫–∞—Ä—Ç—ã –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞, —Å–æ—é–∑–Ω–∏–∫–æ–≤ –∏ —Å–ª—É—á–∞–π–Ω—ã–µ –∫–∞—Ä—Ç—ã —Å –ø–æ–ª—è.

---

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏–≥—Ä–æ–∫–æ–≤ (`/start`)
- ‚úÖ –ü–æ–∏—Å–∫ –∏–≥—Ä—ã (–≤ —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ ‚Äî **–ø—Ä–æ—Ç–∏–≤ –±–æ—Ç–∞**)
- ‚úÖ –ë–æ–π –≤ –ø–æ—à–∞–≥–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
- ‚úÖ –ê—Ç–∞–∫–∞ –ø–æ –∫–∞—Ä—Ç–∞–º –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞, —Å–æ—é–∑–Ω–∏–∫–∞–º –∏ —Å–ª—É—á–∞–π–Ω—ã–º –∫–∞—Ä—Ç–∞–º —Å –ø–æ–ª—è
- ‚úÖ –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª—è (—á–µ—Ä–µ–∑ —Å–æ–æ–±—â–µ–Ω–∏—è)
- ‚úÖ –≠–ª–∏—Ç–Ω—ã–µ –∫–∞—Ä—Ç—ã —Å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–º —É—Ä–æ–Ω–æ–º
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ HP/ATK
- ‚ùå PvP-–º–∞—Ç—á–∏ (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)
- ‚ùå –ö–æ–ª–æ–¥–∞ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–ø–æ–∫–∞ –∑–∞–≥–ª—É—à–∫–∞)
- ‚ùå Mini Apps (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- **Backend**: Python + aiogram + SQLAlchemy
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: SQLite (–≤ —Ñ–∞–π–ª–µ `data/game.db`)
- **–í–µ–±-—Å–µ—Ä–≤–µ—Ä**: aiohttp (–¥–ª—è webhook)
- **–î–µ–ø–ª–æ–π**: Render (Web Service)
- **–Ø–∑—ã–∫**: Python 3.11 (—á–µ—Ä–µ–∑ Dockerfile)

---

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

> ‚ùó –¢—Ä–µ–±—É–µ—Ç—Å—è Python 3.11, `pip`, `git`

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
   ```bash
   git clone <your-repo-url>
   cd stalker-card-bot
   ```

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   ```bash
   pip install -r requirements.txt
   ```

3. –°–æ–∑–¥–∞–π—Ç–µ `.env`:
   ```env
   BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrSTUvwxYZ
   DATABASE_URL=sqlite+aiosqlite:///./data/game.db
   ```

4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ:
   ```bash
   python main.py
   ```

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
stalker_gwent_bot/
‚îú‚îÄ‚îÄ .env
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ main.py
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ settings.py
‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ models.py
‚îÇ   ‚îî‚îÄ‚îÄ db.py
‚îú‚îÄ‚îÄ bot/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ start.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ game.py
‚îÇ   ‚îî‚îÄ‚îÄ keyboards/
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ       ‚îî‚îÄ‚îÄ inline.py
‚îú‚îÄ‚îÄ game/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ engine.py
‚îÇ   ‚îú‚îÄ‚îÄ factions.py
‚îÇ   ‚îî‚îÄ‚îÄ matchmaker.py
‚îî‚îÄ‚îÄ data/
    ‚îî‚îÄ‚îÄ game.db (—Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
```

---

## –ò–≥—Ä–æ–≤–∞—è –º–µ—Ö–∞–Ω–∏–∫–∞

- –í –Ω–∞—á–∞–ª–µ –±–æ—è ‚Äî **–≤—Å–µ –∫–∞—Ä—Ç—ã –∏–∑ —Ä—É–∫–∏** –≤—ã–∫–ª–∞–¥—ã–≤–∞—é—Ç—Å—è –Ω–∞ –ø–æ–ª–µ.
- –í –∫–∞–∂–¥–æ–º —Ä–∞—É–Ω–¥–µ ‚Äî **4 —Å–ª—É—á–∞–π–Ω—ã–µ –∫–∞—Ä—Ç—ã** –ø–æ—è–≤–ª—è—é—Ç—Å—è –Ω–∞ –ø–æ–ª–µ (`field_cards`).
- –ò–≥—Ä–æ–∫–∏ **–¥–µ–ª–∞—é—Ç 3 —Ö–æ–¥–∞** –∑–∞ —Ä–∞—É–Ω–¥: –≤—ã–±–∏—Ä–∞—é—Ç –∫–∞—Ä—Ç—É –∏ —Ü–µ–ª—å –¥–ª—è –∞—Ç–∞–∫–∏.
- **–≠–ª–∏—Ç–Ω—ã–µ –∫–∞—Ä—Ç—ã** –º–æ–≥—É—Ç –Ω–∞–Ω–æ—Å–∏—Ç—å **–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —É—Ä–æ–Ω**.
- –ò–≥—Ä–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ **—É –æ–¥–Ω–æ–≥–æ –∏–∑ –∏–≥—Ä–æ–∫–æ–≤** –Ω–µ –∑–∞–∫–æ–Ω—á–∞—Ç—Å—è **–∂–∏–≤—ã–µ –∫–∞—Ä—Ç—ã**.

---

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

- ‚ùó –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–∞–≥–ª—É—à–∫–∞ `DUMMY_DECK` –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω–æ–π –∫–æ–ª–æ–¥—ã –∏–∑ –ë–î.
- ‚ùó AI –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω (–±–æ—Ç –Ω–µ —Ö–æ–¥–∏—Ç).
- ‚ùó –ö–Ω–æ–ø–∫–∏ "–í—ã–±—Ä–∞—Ç—å –∫–∞—Ä—Ç—É" –∏ "–ê—Ç–∞–∫–æ–≤–∞—Ç—å" –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–≤—è–∑–∞–Ω—ã.
- ‚ùó –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª—è ‚Äî —Ç–µ–∫—Å—Ç–æ–≤–∞—è (–Ω–µ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è).
- ‚ùó –ù–µ—Ç –∑–∞—â–∏—Ç—ã –æ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –≤ `/start`.

---

## –ü–ª–∞–Ω—ã –Ω–∞ –±—É–¥—É—â–µ–µ

- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å PvP-–º–∞—Ç—á–∏.
- ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–µ –∫–æ–ª–æ–¥—ã –∏–∑ –±–∞–∑—ã.
- ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞—Ä—Ç (Mini Apps –∏–ª–∏ inline images).
- ‚úÖ –£–ª—É—á—à–∏—Ç—å –ò–ò (—Ä–µ–∞–ª—å–Ω—ã–µ —Ö–æ–¥—ã).
- ‚úÖ –î–æ–±–∞–≤–∏—Ç—å —Ñ—Ä–∞–∫—Ü–∏–∏ –∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏.
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Ä–∞–Ω–≥–æ–≤ –∏ —Ç—É—Ä–Ω–∏—Ä–æ–≤.
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ PostgreSQL.

---

## –î–µ–ø–ª–æ–π –Ω–∞ Render

1. –°–æ–∑–¥–∞–π—Ç–µ **Web Service** –Ω–∞ Render.
2. –£–∫–∞–∂–∏—Ç–µ:
   - **Runtime**: Docker
   - **Build Command**: (–æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º)
   - **Start Command**: `python main.py`
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
   - `BOT_TOKEN`
   - `DATABASE_URL` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `sqlite+aiosqlite:///./data/game.db`)
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `Dockerfile` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `python:3.11-slim`.

---

## –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|--------|
| `/start` | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é |
| `/play_N` | (–≤—Ä–µ–º–µ–Ω–Ω–æ) –í—ã–±—Ä–∞—Ç—å –∫–∞—Ä—Ç—É N (–¥–ª—è –∞—Ç–∞–∫–∏) |

---

## –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã

| –ù–∞–∑–≤–∞–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| `main_menu_kb` | –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é: "–ù–∞–π—Ç–∏ –∏–≥—Ä—É", "–ú–æ–∏ –∫–æ–ª–æ–¥—ã", "–†–µ–π—Ç–∏–Ω–≥" |
| `battle_board_kb` | –ö–Ω–æ–ø–∫–∞ "–ê—Ç–∞–∫–æ–≤–∞—Ç—å" –∏–ª–∏ "–í—ã–ª–æ–∂–∏—Ç—å –∫–∞—Ä—Ç—É" |
| `select_card_kb` | –í—ã–±–æ—Ä –∫–∞—Ä—Ç—ã –¥–ª—è –∞—Ç–∞–∫–∏ |
| `select_target_kb` | –í—ã–±–æ—Ä —Ü–µ–ª–∏: –≤—Ä–∞–≥, —Å–æ—é–∑–Ω–∏–∫, –∫–∞—Ä—Ç–∞ —Å –ø–æ–ª—è |

---

## –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

### `User`
- `id`, `telegram_id`, `username`, `rating`, `current_deck_id`

### `Card`
- `id`, `name`, `faction`, `card_type`, `attack`, `health`, `rank`, `crit_chance`, `crit_multiplier`

### `Match`
- `id`, `player1_id`, `player2_id`, `status`, `is_ai_match`, `board_p1`, `board_p2`, `field_cards`, `current_round`, `current_player_id`, `moves_left_p1`, `moves_left_p2`

---

## –ë–æ–µ–≤–∞—è –ª–æ–≥–∏–∫–∞

- –ö–∞–∂–¥–∞—è –∫–∞—Ä—Ç–∞ –∏–º–µ–µ—Ç `attack` –∏ `health`.
- –ü—Ä–∏ –∞—Ç–∞–∫–µ: `target.health -= attacker.attack`.
- –ï—Å–ª–∏ `health <= 0` ‚Üí –∫–∞—Ä—Ç–∞ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∞.
- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —É—Ä–æ–Ω ‚Äî —Ç–æ–ª—å–∫–æ —É **—ç–ª–∏—Ç–Ω—ã—Ö –∫–∞—Ä—Ç**.

---

## –≠–ª–∏—Ç–Ω—ã–µ –∫–∞—Ä—Ç—ã

- –ò–º–µ—é—Ç `rank: "elite"`.
- `crit_chance`: —à–∞–Ω—Å –∫—Ä–∏—Ç–∞ (–≤ %).
- `crit_multiplier`: –º–Ω–æ–∂–∏—Ç–µ–ª—å —É—Ä–æ–Ω–∞ –ø—Ä–∏ –∫—Ä–∏—Ç–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 2.0 = 2x —É—Ä–æ–Ω).
- –ü—Ä–∏ –∞—Ç–∞–∫–µ ‚Äî –±—Ä–æ—Å–æ–∫ `d100`, –µ—Å–ª–∏ <= `crit_chance` ‚Üí –∫—Ä–∏—Ç.

---

## –ò–ò –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞

- –ü–æ–∫–∞ **–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω**.
- –í –±—É–¥—É—â–µ–º: –≤—ã–±–æ—Ä —Ü–µ–ª–∏ —Å–ª—É—á–∞–π–Ω–æ –∏–ª–∏ –ø–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏.

---

## –ê–≤—Ç–æ—Ä

@yourusername

---

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ –∏–Ω–æ–µ)

---
